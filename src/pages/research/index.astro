---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import ContentCard from '../../components/ContentCard.astro';

const research = await getCollection('research');
const sorted = research.sort((a, b) =>
  b.data.date.getTime() - a.data.date.getTime()
);
---

<BaseLayout title="Research - PolitoTalksTech">
  <div class="page-header">
    <div class="container">
      <h1>Research</h1>
      <p>Academic research, theses, and scholarly work from Politecnico students and faculty.</p>
    </div>
  </div>

  <div class="main-content">
    <div class="container container--narrow">
      <section class="content-list">
        {sorted.map(item => (
          <ContentCard
            title={item.data.title}
            author={item.data.author}
            date={item.data.date}
            excerpt={item.data.excerpt}
            href={`/research/${item.slug}`}
            tags={item.data.tags}
            metadata={item.data.researchType}
          />
        ))}
      </section>
    </div>
  </div>
</BaseLayout>

<style>
.page-header {
  border-bottom: 1px solid var(--color-border);
  padding: var(--space-8) 0;
}

.page-header h1 {
  font-family: var(--font-serif);
  font-size: var(--text-4xl);
  font-weight: 600;
  color: var(--color-text-primary);
  margin: 0 0 var(--space-3) 0;
}

.page-header p {
  font-size: var(--text-lg);
  color: var(--color-text-secondary);
  max-width: 680px;
  margin: 0;
}

.main-content {
  padding: var(--space-8) 0;
}

.content-list {
  max-width: 800px;
  margin: 0 auto;
}
</style>
