---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import ContentCard from '../../components/ContentCard.astro';

const projects = await getCollection('projects');
const sorted = projects.sort((a, b) =>
  b.data.date.getTime() - a.data.date.getTime()
);
---

<BaseLayout title="Projects - PolitoTalksTech">
  <div class="page-header">
    <div class="container">
      <h1>Projects</h1>
      <p>Student-built software, hardware, and research projects from Politecnico di Torino.</p>
    </div>
  </div>

  <div class="main-content">
    <div class="container container--narrow">
      <section class="content-list">
        {sorted.map(project => (
          <ContentCard
            title={project.data.title}
            author={project.data.author}
            date={project.data.date}
            excerpt={project.data.excerpt}
            href={`/projects/${project.slug}`}
            tags={project.data.tags}
          />
        ))}
      </section>
    </div>
  </div>
</BaseLayout>

<style>
.page-header {
  border-bottom: 1px solid var(--color-border);
  padding: var(--space-8) 0;
}

.page-header h1 {
  font-family: var(--font-serif);
  font-size: var(--text-4xl);
  font-weight: 600;
  color: var(--color-text-primary);
  margin: 0 0 var(--space-3) 0;
}

.page-header p {
  font-size: var(--text-lg);
  color: var(--color-text-secondary);
  max-width: 680px;
  margin: 0;
}

.main-content {
  padding: var(--space-8) 0;
}

.content-list {
  max-width: 800px;
  margin: 0 auto;
}
</style>
